---
title: HTTPS
date: 2021-04-09 17:21:56
categories: 网络
tags: 网络
---

总体流程：

1. 客户端发起请求
2. 服务端返回证书信息和公钥
3. 客户端验证证书，并生成一个随机串密码，通过公钥加密，带上签名发送给服务端
4. 服务端使用私钥解出随机串密码

验证证书：

1. CA 把证书内容和签名颁发给服务端；
2. 服务端把公钥和证书给客户端；
3. 客户端使用本地证书公钥解密签名（服务端把证书指纹 hash 和指纹算法通过私钥加密）得到证书内容+指纹 hash，再通过指纹算法计算证书内容得到另一个 hash，两个 hash 比对；并验证 Url 是否一致、是否超出过期时间

[参考 1](https://segmentfault.com/a/1190000012196642)
[参考 2](https://www.cnblogs.com/fengf233/p/11775415.html)
